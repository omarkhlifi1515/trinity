package com.redtrinity.pentest.utils

import android.content.Context
import android.content.SharedPreferences

object PreferenceHelper {
    private const val PREF_NAME = "RedTrinityPrefs"
    private const val KEY_WORKSTATION_IP = "workstation_ip"
    private const val DEFAULT_IP = "192.168.1.10"
    private const val KEY_PORT = "port"
    private const val DEFAULT_PORT = "8888"

    private fun getPreferences(context: Context): SharedPreferences {
        return context.getSharedPreferences(PREF_NAME, Context.MODE_PRIVATE)
    }

    fun getBaseUrl(context: Context): String {
        val prefs = getPreferences(context)
        val ip = prefs.getString(KEY_WORKSTATION_IP, DEFAULT_IP) ?: DEFAULT_IP
        val port = prefs.getString(KEY_PORT, DEFAULT_PORT) ?: DEFAULT_PORT
        return "http://$ip:$port"
    }
    
    fun getWorkstationIp(context: Context): String {
        return getPreferences(context).getString(KEY_WORKSTATION_IP, DEFAULT_IP) ?: DEFAULT_IP
    }

    fun setWorkstationIp(context: Context, ip: String) {
        getPreferences(context).edit().putString(KEY_WORKSTATION_IP, ip).apply()
    }

    fun getPort(context: Context): String {
        return getPreferences(context).getString(KEY_PORT, DEFAULT_PORT) ?: DEFAULT_PORT
    }

    fun setPort(context: Context, port: String) {
        getPreferences(context).edit().putString(KEY_PORT, port).apply()
    }
}
