# Render Build Fix - Quick Guide

## ğŸ”§ Issues Fixed

1. âœ… **TailwindCSS moved to dependencies** - Required for Next.js build
2. âœ… **Updated render.yaml** - Uses `rootDir: web` for proper build path
3. âœ… **All modules verified** - `local-auth.ts` exists and is properly exported

## ğŸš€ How to Fix in Render Dashboard

### Option 1: Update Build Settings (Recommended)

1. **Go to Render Dashboard**
   - Open your service: `trinity-get-2-web`
   - Click **"Settings"** tab

2. **Update Build Command**
   - Find **"Build Command"** field
   - Change from: `npm install && npm run build`
   - Change to: `cd web && npm install && npm run build`
   - Or better: Set **"Root Directory"** to `web` and use: `npm install && npm run build`

3. **Update Start Command**
   - Find **"Start Command"** field  
   - Change from: `npm start`
   - Change to: `cd web && npm start`
   - Or if Root Directory is set to `web`: `npm start`

4. **Save and Redeploy**
   - Click **"Save Changes"**
   - Click **"Manual Deploy"** â†’ **"Deploy latest commit"**

### Option 2: Use Blueprint (Easier)

1. **Delete current service** (optional, or just update it)

2. **Create new service from Blueprint**
   - Click **"New +"** â†’ **"Blueprint"**
   - Connect your GitHub repo
   - Render will auto-detect `render.yaml`
   - Review settings and click **"Apply"**

3. **Set Environment Variables**
   - **REQUIRED**: `JSONBIN_API_KEY` = `<your-master-key>`
   - `AUTH_SECRET` = `<auto-generated>`
   - `NODE_ENV` = `production`

4. **Deploy**
   - Click **"Create Blueprint"**
   - Wait for build to complete

## âœ… Verify Fix

After redeploy, check build logs for:
- âœ… `Installing dependencies...`
- âœ… `Creating an optimized production build...`
- âœ… `Compiled successfully`
- âŒ Should NOT see: `Cannot find module 'tailwindcss'`
- âŒ Should NOT see: `Can't resolve '@/lib/auth/local-auth'`

## ğŸ“ Current Configuration

**render.yaml** (already updated):
```yaml
services:
  - type: web
    name: trinity-get-2-web
    env: node
    plan: free
    rootDir: web
    buildCommand: npm install && npm run build
    startCommand: npm start
```

**package.json** (already updated):
- `tailwindcss` moved to `dependencies` (was in `devDependencies`)
- `postcss` moved to `dependencies`
- `tailwindcss-animate` moved to `dependencies`

## ğŸ› If Still Failing

1. **Check Root Directory**
   - Render Dashboard â†’ Settings â†’ Root Directory
   - Should be: `web` (not empty)

2. **Check Build Command**
   - Should be: `npm install && npm run build`
   - (If Root Directory is `web`)

3. **Check Environment Variables**
   - `NODE_ENV` = `production`
   - `AUTH_SECRET` = `<32+ character string>`
   - `JSONBIN_API_KEY` = `<your-master-key>` âš ï¸ REQUIRED!

4. **Check Build Logs**
   - Look for the exact error message
   - Share logs if still failing

## ğŸ¯ Quick Fix Steps

1. **Render Dashboard** â†’ Your Service â†’ **Settings**
2. Set **Root Directory** = `web`
3. Set **Build Command** = `npm install && npm run build`
4. Set **Start Command** = `npm start`
5. **Save** â†’ **Manual Deploy**

---

**After fixing, your build should succeed! ğŸš€**

