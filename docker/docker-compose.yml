version: "3.8" # Updated version
services:
  redis:
    image: redis:alpine

  frappe:
    image: frappe/bench:latest
    command: bash /workspace/init.sh
    environment:
      - SHELL=/bin/bash
      - DB_HOST=${DB_HOST:-db.pyogdmduqxjdypioeaoa.supabase.co}
      - DB_PORT=${DB_PORT:-5432}
      - DB_USER=${DB_USER:-postgres}
      - DB_PASSWORD=${DB_PASSWORD:-sb_publishable_BHJYc6qeAkU9j-hxajb8bg_A0w0bnbX}
    working_dir: /home/frappe
    volumes:
      - .:/workspace
    ports:
      - 8000:8000
      - 9000:9000

# Note: mariadb service and its volume were removed. Use a managed Postgres (Supabase)
